<!DOCTYPE html>

<html manifest="manifest.appcache">	

	<head>
		<title>Mizbeach IMEI Storage App</title>

<style>body,html{margin:0;padding:0;width:100%;overflow:hidden;font-family:arial,helvetica,sans-serif}#app-hud{display:block;position:fixed;width:inherit;z-index:10;top:0;line-height:3em;overflow:hidden;background:-moz-linear-gradient(top,rgba(255,255,255,1) 0,rgba(255,255,255,.85) 60%,rgba(255,255,255,0) 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(255,255,255,1)),color-stop(60%,rgba(255,255,255,.85)),color-stop(100%,rgba(255,255,255,0)));background:-webkit-linear-gradient(top,rgba(255,255,255,1) 0,rgba(255,255,255,.85) 60%,rgba(255,255,255,0) 100%);background:-o-linear-gradient(top,rgba(255,255,255,1) 0,rgba(255,255,255,.85) 60%,rgba(255,255,255,0) 100%);background:-ms-linear-gradient(top,rgba(255,255,255,1) 0,rgba(255,255,255,.85) 60%,rgba(255,255,255,0) 100%);background:linear-gradient(to bottom,rgba(255,255,255,1) 0,rgba(255,255,255,.85) 60%,rgba(255,255,255,0) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#00ffffff', GradientType=0)}#app-hud .connection-indicator{float:left;display:block;position:relative;border-radius:.375em;margin-top:1.0625em;margin-left:1em;height:.75em;width:.75em;background-color:orange;-webkit-transition:background .35s ease-in;-moz-transition:background .35s ease-in;-ms-transition:background .35s ease-in;-o-transition:background .35s ease-in;transition:background .35s ease-in}body.connection-online #app-hud .connection-indicator{background-color:green}body.connection-offline #app-hud .connection-indicator{background-color:red}body #app-hud .connection-indicator.connection-checking{background-color:orange}#app-hud .title{text-transform:uppercase;margin-left:.5em;line-height:3em;font-weight:900;font-size:1em;float:left}#app-hud .settings{display:block;position:relative;height:18px;width:18px;background-size:100%;float:right;background-position:bottom;margin-right:1em;margin-top:15px;background-image:url(data:image/png;base64,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)}#app-hud .settings:hover{background-position:top}.fullscreen{position:relative;overflow:hidden;opacity:.4;-webkit-transition:opacity .2s ease-out;-moz-transition:opacity .2s ease-out;-ms-transition:opacity .2s ease-out;-o-transition:opacity .2s ease-out;transition:opacity .2s ease-out}.fullscreen.active{opacity:1}.fullscreen .headline{font-size:1.75em;margin:1.75em 1.25em .4em;font-weight:900;letter-spacing:-1px;line-height:.925em}.fullscreen .title{font-size:1.25em;margin:0 1.75em;letter-spacing:-1px;line-height:.975em}.fullscreen .subtext{font-family:georgia,serif;margin:1em 2.825em 0;font-style:italic;font-size:.75em;color:#777;clear:both}#finish-registration,#start-registration{position:relative;text-align:center;color:#fff;font-weight:900;margin:1.25em 2.25em;word-spacing:2px;line-height:2.5em;font-size:1em;letter-spacing:1px;background-color:#8ab953;border-bottom:6px solid #3e7400;text-transform:uppercase;text-shadow:1px 2px 1px #3e7400;filter:dropshadow(color=#3e7400,offx=1,offy=2);-webkit-border-radius:7px 7px 6px 6px;border-radius:7px 7px 6px 6px}#finish-registration{margin-top:0}#start-registration:hover{top:2px;border-bottom-width:4px}#start-registration:active{top:4px;border-bottom-width:2px}#IMEI,#invoice{position:relative;margin:1em 7.75%;font-size:1em;padding:.125em .5em;width:80%}#addIMEItoInvoice,#editSavedIMEIs,.editInvoiceAttachments,.editInvoiceNumber,.restart{text-transform:uppercase;font-size:.75em;margin-left:1em;float:left}.restart{color:#ccc;float:right;font-weight:900;line-height:1.7em;margin-right:1.5em;padding:1.25em .75em .25em;transition:color .75s ease-out}.editInvoiceAttachments,.editInvoiceNumber{color:red;margin-left:2.75em}#addIMEItoInvoice{color:#8ab953}#editSavedIMEIs{color:orange}#addIMEItoInvoice,#editSavedIMEIs,.editInvoiceAttachments,.editInvoiceNumber{margin-bottom:1.5em}#addIMEItoInvoice:hover,#editSavedIMEIs:hover,.editInvoiceAttachments,.editInvoiceNumber:hover{text-decoration:underline}.restart:hover{color:red}.progress{float:right;position:relative;text-transform:uppercase;border-bottom:3px solid #3e7400;text-shadow:1px 1px 1px #3e7400;background-color:#8ab953;margin-bottom:1.5em;padding:.35em .7em;margin-right:3em;font-size:.75em;color:#fff;top:-4.2px;-webkit-border-radius:5px;border-radius:5px}.progress:hover{top:-3.2px;border-bottom-width:2px}.progress:active{top:-1.2px;border-bottom-width:1px}input.attention{border-color:red;background-color:orange}#reviewInvoice{visibility:hidden}#reviewInvoice.active{visibility:visible}input.attention::-webkit-input-placeholder{color:#fff}.headline .invoiceNumber{color:#8ab953}.controls-wrapper{overflow:hidden}#imeiReviewList{margin-bottom:1em}#imeiReviewList span{font-family:arial,helvetica,sans-serif;font-style:normal;font-weight:900}.imeiForReview{color:orange;font-size:1.325em;text-decoration:underline}.imeiForReview:active{color:#8ab953}</style>

		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
	</head>

	<body>
		<header id="app-hud">
			<div class="connection-indicator" title="Network Connection Status"></div>
			<div class="title"> Mizbeach </div>
			<div class="settings"></div>
			<div class="restart">RESTART</div>
		</header>

		<div class="fullscreen">
			<div class="headline">Make it Possible to Identify a Device We Sold in a Few Easy Steps</div>
			<div class="title">Register the device sold to precisely identify the device sold without the aid of a receipt</div>

			<div id="start-registration">Start Registration</div>
		</div>

		<div id="step-1" class="fullscreen">
			
			<div class="headline">Step 1: Invoice Number</div>
			<div class="title">Enter the Invoice Number in the Form Field below to begin</div>
			<div class="subtext">Pairing a device to an invoice allows us to look up client's details with the device's IMEI number</div>

			<input id="invoice" placeholder="Touch Me to Enter the Invoice Number">
			
			<div id="addIMEI" class="progress">Next Step</div>	
			
		</div>	

		<div id="step-2" class="fullscreen">
			
			<div class="headline">Step 2: Add Device IMEIs to Invoice <span class="invoiceNumber">OT0624</span></div>
			<div class="subtext">Enter the IMEI and click 'Save IMEI' to add the device to Invoice <span class="invoiceNumber"></span>. Next Step will not appear until at least 1 IMEI has been added </div>

			<input id="IMEI" placeholder="Insert Device IMEI Number Here">

			<div class="editInvoiceNumber">&larr; Back</div>
			<div id="editSavedIMEIs">Edit (<span class="imeiTally">0</span>)</div>
			<div id="addIMEItoInvoice">Save IMEI</div>
			<div id="reviewInvoice" class="progress">Next Step</div>	
			
		</div>

		<div id="step-3" class="fullscreen">

			<div class="headline">Step 3: Review Invoice <span class="invoiceNumber">OT0624</span></div>
			<div class="title">Confirm the attached IMEIs are correct. Click on the incorrect ones to edit them</div>
			<div id="imeiReviewList" class="subtext"></div>
			<div class="controls-wrapper">				
				<div class="editInvoiceAttachments">&larr; Back</div>
			</div>
			<div id="finish-registration">Complete Registration</div>	
		</div>

<script type="text/javascript">/*! offline 0.4.7 */
(function(){var a,b,c,d,e,f,g;d=function(a,b){var c,d,e,f;f=[];for(d in b.prototype)try{e=b.prototype[d],null==a[d]&&"function"!=typeof e?f.push(a[d]=e):f.push(void 0)}catch(g){c=g}return f},a={},null==a.options&&(a.options={}),c={checks:{xhr:{url:function(){return"/offline-test-request/"+Math.floor(1e9*Math.random())}},image:{url:function(){return"http://dqakt69vkj09v.cloudfront.net/are-we-online.gif?_="+Math.floor(1e9*Math.random())}},active:"image"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0},e=function(a,b){var c,d,e,f,g,h;for(c=a,f=b.split("."),d=g=0,h=f.length;h>g&&(e=f[d],c=c[e],"object"==typeof c);d=++g);return d===f.length-1?c:void 0},a.getOption=function(b){var d,f;return d=null!=(f=e(a.options,b))?f:e(c,b),"function"==typeof d?d():d},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(a.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return a.confirmDown()},!1),a.state="up",a.markUp=function(){return a.trigger("confirmed-up"),"up"!==a.state?(a.state="up",a.trigger("up")):void 0},a.markDown=function(){return a.trigger("confirmed-down"),"down"!==a.state?(a.state="down",a.trigger("down")):void 0},f={},a.on=function(b,c,d){var e,g,h,i,j;if(g=b.split(" "),g.length>1){for(j=[],h=0,i=g.length;i>h;h++)e=g[h],j.push(a.on(e,c,d));return j}return null==f[b]&&(f[b]=[]),f[b].push([d,c])},a.off=function(a,b){var c,d,e,g,h;if(null!=f[a]){if(b){for(d=0,h=[];d<f[a].length;)g=f[a][d],c=g[0],e=g[1],e===b?h.push(f[a].splice(d,1)):h.push(d++);return h}return f[a]=[]}},a.trigger=function(a){var b,c,d,e,g,h,i;if(null!=f[a]){for(g=f[a],i=[],d=0,e=g.length;e>d;d++)h=g[d],b=h[0],c=h[1],i.push(c.call(b));return i}},b=function(a,b,c){var d,e;return d=function(){return a.status&&a.status<12e3?b():c()},null===a.onprogress?(a.addEventListener("error",c,!1),a.addEventListener("timeout",c,!1),a.addEventListener("load",d,!1)):(e=a.onreadystatechange,a.onreadystatechange=function(){return 4===a.readyState?d():0===a.readyState&&c(),"function"==typeof e?e.apply(null,arguments):void 0})},a.checks={},a.checks.xhr=function(){var c,d;d=new XMLHttpRequest,d.offline=!1,d.open("HEAD",a.getOption("checks.xhr.url"),!0),b(d,a.markUp,a.markDown);try{d.send()}catch(e){c=e,a.markDown()}return d},a.checks.image=function(){var b;return b=document.createElement("img"),b.onerror=a.markDown,b.onload=a.markUp,b.src=a.getOption("checks.image.url"),void 0},a.check=function(){return a.trigger("checking"),a.checks[a.getOption("checks.active")]()},a.confirmUp=a.confirmDown=a.check,a.onXHR=function(a){var b,c,e;return b=function(b,c){var d;return d=b.open,b.open=function(e,f,g,h,i){return a({type:e,url:f,async:g,flags:c,user:h,password:i,xhr:b}),d.apply(b,arguments)}},e=window.XMLHttpRequest,window.XMLHttpRequest=function(a){var c,d,f;return c=new e(a),b(c,a),f=c.setRequestHeader,c.headers={},c.setRequestHeader=function(a,b){return c.headers[a]=b,f.call(c,a,b)},d=c.overrideMimeType,c.overrideMimeType=function(a){return c.mimeType=a,d.call(c,a)},c},d(window.XMLHttpRequest,e),null!=window.XDomainRequest?(c=window.XDomainRequest,window.XDomainRequest=function(){var a;return a=new c,b(a),a},d(window.XDomainRequest,c)):void 0},g=function(){return a.getOption("interceptRequests")&&a.onXHR(function(c){var d;return d=c.xhr,d.offline!==!1?b(d,a.confirmUp,a.confirmDown):void 0}),a.getOption("checkOnLoad")?a.check():void 0},setTimeout(g,0),window.Offline=a}).call(this),function(){var a,b,c,d,e,f,g,h,i;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");d=Offline.reconnect={},f=null,e=function(){var a;return null!=d.state&&"inactive"!==d.state&&Offline.trigger("reconnect:stopped"),d.state="inactive",d.remaining=d.delay=null!=(a=Offline.getOption("reconnect.initialDelay"))?a:3},b=function(){var a,b;return a=null!=(b=Offline.getOption("reconnect.delay"))?b:Math.min(Math.ceil(1.5*d.delay),3600),d.remaining=d.delay=a},g=function(){return"connecting"!==d.state?(d.remaining-=1,Offline.trigger("reconnect:tick"),0===d.remaining?h():void 0):void 0},h=function(){return"waiting"===d.state?(Offline.trigger("reconnect:connecting"),d.state="connecting",Offline.check()):void 0},a=function(){return Offline.getOption("reconnect")?(e(),d.state="waiting",Offline.trigger("reconnect:started"),f=setInterval(g,1e3)):void 0},i=function(){return null!=f&&clearInterval(f),e()},c=function(){return Offline.getOption("reconnect")?"connecting"===d.state?(Offline.trigger("reconnect:failure"),d.state="waiting",b()):void 0:void 0},d.tryNow=h,e(),Offline.on("down",a),Offline.on("confirmed-down",c),Offline.on("up",i)}.call(this),function(){var a,b,c,d,e,f;if(!window.Offline)throw new Error("Requests module brought in without offline.js");c=[],f=!1,d=function(a){return Offline.trigger("requests:capture"),"down"!==Offline.state&&(f=!0),c.push(a)},e=function(a){var b,c,d,e,f,g,h,i,j;i=a.xhr,f=a.url,e=a.type,g=a.user,d=a.password,b=a.body,i.abort(),i.open(e,f,!0,g,d),j=i.headers;for(c in j)h=j[c],i.setRequestHeader(c,h);return i.mimeType&&i.overrideMimeType(i.mimeType),i.send(b)},a=function(){return c=[]},b=function(){var b,d,f,g,h,i;for(Offline.trigger("requests:flush"),f={},h=0,i=c.length;i>h;h++)d=c[h],g=d.url.replace(/(\?|&)_=[0-9]+/,function(a,b){return"?"===b?b:""}),f[""+d.type.toUpperCase()+" - "+g]=d;for(b in f)d=f[b],e(d);return a()},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return f?(f=!1,a()):void 0}),Offline.on("up",b),Offline.on("down",function(){return f=!1}),Offline.onXHR(function(a){var b,c,e,f,g;return e=a.xhr,b=a.async,e.offline!==!1&&(c=function(){return d(a)},g=e.send,e.send=function(b){return a.body=b,g.apply(e,arguments)},b)?null===e.onprogress?(e.addEventListener("error",c,!1),e.addEventListener("timeout",c,!1)):(f=e.onreadystatechange,e.onreadystatechange=function(){return 0===e.readyState?c():4===e.readyState&&(0===e.status||e.status>=12e3)&&c(),"function"==typeof f?f.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:b,clear:a}):void 0},0)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");b='<div class="offline-ui"><div class="offline-ui-content"></div></div>',a='<a href class="offline-ui-retry"></a>',e=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},f=d=null,c=function(a){return k(a),f.className+=" "+a},k=function(a){return f.className=f.className.replace(new RegExp("(^| )"+a.split(" ").join("|")+"( |$)","gi")," ")},h={},g=function(a,b){return c(a),null!=h[a]&&clearTimeout(h[a]),h[a]=setTimeout(function(){return k(a),delete h[a]},1e3*b)},i=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=!1),0===a)return"now";c={d:86400,h:3600,m:60,s:1},d={s:"second",m:"minute",h:"hour",d:"day"},f="";for(g in c)if(e=c[g],a>=e)return h=Math.floor(a/e),b&&(g=" "+d[g],1!==h&&(g+="s")),""+h+g},l=function(){var g,h;return f=e(b),document.body.appendChild(f),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(f.appendChild(e(a)),g=f.querySelector(".offline-ui-retry"),h=function(a){return a.preventDefault(),Offline.reconnect.tryNow()},null!=g.addEventListener?g.addEventListener("click",h,!1):g.attachEvent("click",h)),c("offline-ui-"+Offline.state),d=f.querySelector(".offline-ui-content")},j=function(){return l(),Offline.on("up",function(){return k("offline-ui-down"),c("offline-ui-up"),g("offline-ui-up-2s",2),g("offline-ui-up-5s",5)}),Offline.on("down",function(){return k("offline-ui-up"),c("offline-ui-down"),g("offline-ui-down-2s",2),g("offline-ui-down-5s",5)}),Offline.on("reconnect:connecting",function(){return c("offline-ui-connecting"),k("offline-ui-waiting")}),Offline.on("reconnect:tick",function(){return c("offline-ui-waiting"),k("offline-ui-connecting"),d.setAttribute("data-retry-in-seconds",Offline.reconnect.remaining),d.setAttribute("data-retry-in-abbr",i(Offline.reconnect.remaining)),d.setAttribute("data-retry-in",i(Offline.reconnect.remaining,!0))}),Offline.on("reconnect:stopped",function(){return k("offline-ui-connecting offline-ui-waiting"),d.setAttribute("data-retry-in-seconds",null),d.setAttribute("data-retry-in-abbr",null),d.setAttribute("data-retry-in",null)}),Offline.on("reconnect:failure",function(){return g("offline-ui-reconnect-failed-2s",2),g("offline-ui-reconnect-failed-5s",5)}),Offline.on("reconnect:success",function(){return g("offline-ui-reconnect-succeeded-2s",2),g("offline-ui-reconnect-succeeded-5s",5)})},"complete"===document.readyState?j():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",j,!1):(m=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&j(),"function"==typeof m?m.apply(null,arguments):void 0})}.call(this);
var pubsub=pubsub||{};!function(a){a.notification=a.notification||{},a.notification.subscribers=[],a.notification.log=[],a.notification.subscribe=function(b,c,d,e){a.notification.subscribers[b]||(a.notification.subscribers[b]={});var f=a.notification.subscribers[b];f[c]={},f[c].response=d,f[c].responseParams=e||null,a.notification.log.push({type:"subscribe",notification:b,subscriber:c})},a.notification.unsubscribe=function(b,c){a.notification.subscribers[b]&&a.notification.subscribers[b][c]&&(delete a.notification.subscribers[b][c],a.notification.log.push({type:"unsubscribe",notification:b,unsubscriber:c}))},a.notification.publish=function(b,c,d){if(a.notification.subscribers[b]){var d=d||"unidentified",e=a.notification.subscribers[b],f=[];for(var g in e){var h={};h.notificationParams=c||null,h.responseParams=a.notification.subscribers[b][g].responseParams||null,setTimeout(function(a,b){return function(){e[a].response(b)}}(g,h),0),f.push(g)}a.notification.log.push({type:"publish",notification:b,informedSubscribers:f,publisher:d})}}}(pubsub);var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}(),imeiapp={},imeiapp.DOM={},imeiapp.utils={},imeiapp.stats={},imeiapp.animate={},imeiapp.network={},imeiapp.currentInvoice={},imeiapp.storage=window.localStorage,imeiapp.stats.step=0,imeiapp.currentInvoice.invoice="",imeiapp.currentInvoice.imeis=[],imeiapp.pubsub=pubsub.notification,imeiapp.network.intervals={},imeiapp.DOM.startRegistration=document.getElementById("start-registration"),imeiapp.DOM.cancelRegistration=document.getElementsByClassName("restart"),imeiapp.DOM.connectionIndicator=document.getElementsByClassName("connection-indicator"),imeiapp.DOM.editInvoiceNumber=document.getElementsByClassName("editInvoiceNumber"),imeiapp.DOM.invoiceNumberSlots=document.getElementsByClassName("invoiceNumber"),imeiapp.DOM.IMEIsForReview=document.getElementsByClassName("imeiForReview"),imeiapp.DOM.imeiTallySlots=document.getElementsByClassName("imeiTally"),imeiapp.DOM.editInvoiceAttachments=document.getElementsByClassName("editInvoiceAttachments"),imeiapp.DOM.editSavedIMEIs=document.getElementById("editSavedIMEIs"),imeiapp.DOM.invoice=document.getElementById("invoice"),imeiapp.DOM.IMEI=document.getElementById("IMEI"),imeiapp.DOM.addIMEI=document.getElementById("addIMEI"),imeiapp.DOM.saveIMEI=document.getElementById("addIMEItoInvoice"),imeiapp.DOM.reviewInvoice=document.getElementById("reviewInvoice"),imeiapp.DOM.imeiReviewList=document.getElementById("imeiReviewList"),imeiapp.DOM.completeRegistration=document.getElementById("finish-registration"),imeiapp.DOM.screens=document.getElementsByClassName("fullscreen"),imeiapp.utils.sha1=function(a){var b=CryptoJS.SHA1(a);return b.toString()},imeiapp.utils.utf8=function(a){if(null===a||"undefined"==typeof a)return"";var b,c,d=a+"",e="",f=0;b=c=0,f=d.length;for(var g=0;f>g;g++){var h=d.charCodeAt(g),i=null;if(128>h)c++;else if(h>127&&2048>h)i=String.fromCharCode(h>>6|192,63&h|128);else if(h&!0)i=String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128);else{if(h&!0)throw new RangeError("Unmatched trail surrogate at "+g);var j=d.charCodeAt(++g);if(j&!0)throw new RangeError("Unmatched lead surrogate at "+(g-1));h=((1023&h)<<10)+(1023&j)+65536,i=String.fromCharCode(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}null!==i&&(c>b&&(e+=d.slice(b,c)),e+=i,b=c=g+1)}return c>b&&(e+=d.slice(b,f)),e},imeiapp.utils.easeInOutQuad=function(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)},imeiapp.utils.onResize=function(a,b){return onresize=function(){clearTimeout(b),b=setTimeout(a,250)},a},imeiapp.utils.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},imeiapp.utils.addClass=function(a,b){imeiapp.utils.hasClass(a,b)||(a.className+=" "+b)},imeiapp.utils.removeClass=function(a,b){if(imeiapp.utils.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},imeiapp.utils.toggleClass=function(a,b){imeiapp.utils.hasClass(a,b)?imeiapp.utils.removeClass(a,b):imeiapp.utils.addClass(a,b)},imeiapp.utils.activeScreenIndex=function(){for(var a=imeiapp.DOM.screens,b=imeiapp.utils.hasClass,c=a.length-1;c>=0;c--)if(b(a[c],"active"))return c},imeiapp.utils.launchApp=function(){{var a=imeiapp,b=a.DOM,c=a.utils,d=a.pubsub,e=a.storage,f=a.network,g=d.publish;e.registrations}e.registrations||c.createRegistrationStorage(),e.transactions||c.createTransactionStorage(),e.archives||c.createArchiveStorage(),"up"==f.networkState()?g("network-up",null,this):g("network-down",null,this),b.setScreensHeight(),c.gotoScreen(0)},imeiapp.utils.cacheReady=function(){alert("App Has Been Updated and will Restart Now"),window.applicationCache.swapCache(),location.reload(!0)},imeiapp.utils.cacheDownloading=function(){imeiapp.utils.gotoScreen(0),imeiapp.utils.deactivateActiveScreen(),alert("Downloading App Updates - Sorry for the Wait")},imeiapp.utils.createStorage=function(a,b){var c=imeiapp.storage,d=a,b=b||"[]";return c[a]?!1:(console.log(" # "+d.toUpperCase()+" DB NOT FOUND\n --> creating it @ imeiapp.storage."+d),c[a]=b,!0)},imeiapp.utils.createTransactionStorage=function(){return imeiapp.utils.createStorage("transactions","{}")},imeiapp.utils.createRegistrationStorage=function(){return imeiapp.utils.createStorage("registrations")},imeiapp.utils.createArchiveStorage=function(){return imeiapp.utils.createStorage("archives","{}")},imeiapp.utils.getStorage=function(a){var b=imeiapp,c=b.storage,d=b.utils,e=c[a],f=d.utf8(e);return JSON.parse(f)},imeiapp.utils.getRegistrationStorage=function(){return imeiapp.utils.getStorage("registrations")},imeiapp.utils.getTransactionStorage=function(){return imeiapp.utils.getStorage("transactions")},imeiapp.utils.getArchiveStorage=function(){return imeiapp.utils.getStorage("archives")},imeiapp.utils.storeRegistration=function(a){if("[object Object]"!=Object.prototype.toString.call(a))return!1;var b=imeiapp.utils.getRegistrationStorage();return b.push(a),imeiapp.storage.registrations=JSON.stringify(b),!0},imeiapp.utils.storeTransaction=function(){var a=imeiapp.utils,b=a.sha1,c=a.utf8,d=a.getTransactionStorage(),e=JSON.stringify(a.getRegistrationStorage()),f=c(e).replace(/"/g,'\\"'),g=b('"'+f+'"');return d[g]=e,imeiapp.storage.transactions=JSON.stringify(d),delete imeiapp.storage.registrations,imeiapp.utils.createRegistrationStorage(),g},imeiapp.utils.getTransaction=function(a){var b=imeiapp.utils,c=b.getTransactionStorage();return c[a]},imeiapp.utils.archiveTransaction=function(a){if(!a)return!1;var b=imeiapp.utils,c=b.getArchiveStorage(),d=b.getTransactionStorage();return c[a]=d[a],delete d[a],imeiapp.storage.archives=JSON.stringify(c),imeiapp.storage.transactions=JSON.stringify(d),!0},imeiapp.utils.deleteArchiveEntry=function(a){if(!a)return!1;var b=imeiapp.utils,c=b.getArchiveStorage();return delete c[a],console.log("deleted transaction #"+a+" from archives"),imeiapp.storage.archives=JSON.stringify(c),!0},imeiapp.animate.scrollTo=function(){var a,b,c;return function(d,e){function f(){var d;c=(Date.now()-b)/e,c>=1&&(clearInterval(a),c=1),d=c*h+g,window.scrollBy(0,d-window.pageYOffset)}var g=window.pageYOffset,h=d-window.pageYOffset;return e=e||400,b=Date.now(),c=0,a&&clearInterval(a),a=setInterval(f,10)}}(),imeiapp.DOM.startRegistration.addEventListener("click",function(){imeiapp.pubsub.publish("start-registration",null,this)}),imeiapp.DOM.addIMEI.addEventListener("click",function(){imeiapp.pubsub.publish("add-imei",null,this)}),imeiapp.DOM.saveIMEI.addEventListener("click",function(){imeiapp.pubsub.publish("save-imei",null,this)}),imeiapp.DOM.editSavedIMEIs.addEventListener("click",function(){imeiapp.pubsub.publish("edit-imei",null,this)}),imeiapp.DOM.reviewInvoice.addEventListener("click",function(){imeiapp.pubsub.publish("reviewInvoice",null,this)}),imeiapp.DOM.completeRegistration.addEventListener("click",function(){imeiapp.pubsub.publish("save-registration",null,this)}),imeiapp.utils.savedIMEIsTally=function(){imeiapp.pubsub.publish("imei-tally",null,this)},imeiapp.DOM.editSavedIMEIs.addEventListener("click",function(){for(var a=0;a<imeiapp.currentInvoice.imeis.length;a++){var b=imeiapp.currentInvoice.imeis.length;imeiapp.utils.reviewIMEI(a),b>imeiapp.currentInvoice.imeis.length&&(a-=1)}0==imeiapp.currentInvoice.imeis.length&&alert("There are no IMEIs attached to this Invoice"),imeiapp.utils.savedIMEIsTally()});for(var i=imeiapp.DOM.cancelRegistration.length-1;i>=0;i--)imeiapp.DOM.cancelRegistration[i].addEventListener("click",function(){imeiapp.pubsub.publish("cancel-registration",null,this)});for(var i=imeiapp.DOM.editInvoiceNumber.length-1;i>=0;i--)imeiapp.DOM.editInvoiceNumber[i].addEventListener("click",function(){imeiapp.pubsub.publish("edit-invoice",null,this)});for(var i=imeiapp.DOM.editInvoiceAttachments.length-1;i>=0;i--)imeiapp.DOM.editInvoiceAttachments[i].addEventListener("click",function(){imeiapp.pubsub.publish("edit-invoice-attachments",null,this)});imeiapp.utils.onResize(function(){imeiapp.pubsub.publish("windowResized",null,this)}),imeiapp.pubsub.subscribe("start-registration","step-0",function(){imeiapp.utils.gotoScreen(1),imeiapp.DOM.invoice.focus()},null),imeiapp.pubsub.subscribe("add-imei","step-1",function(){if(!imeiapp.DOM.invoice.value)return alert("An Invoice Number is Needed to Continue"),imeiapp.utils.addClass(imeiapp.DOM.invoice,"attention"),imeiapp.DOM.invoice.addEventListener("input",function(){imeiapp.utils.removeClass(imeiapp.DOM.invoice,"attention"),imeiapp.DOM.invoice.removeEventListener("input",arguments.callee)}),void 0;imeiapp.currentInvoice.invoice=imeiapp.DOM.invoice.value;for(var a=imeiapp.DOM.invoiceNumberSlots.length-1;a>=0;a--)imeiapp.DOM.invoiceNumberSlots[a].innerHTML="#"+imeiapp.DOM.invoice.value;imeiapp.utils.gotoScreen(2),imeiapp.DOM.IMEI.focus()},null),imeiapp.pubsub.subscribe("save-imei","step-2",function(){return imeiapp.DOM.IMEI.value?(imeiapp.currentInvoice.imeis||(imeiapp.currentInvoice.imeis=[]),imeiapp.currentInvoice.imeis.push(imeiapp.DOM.IMEI.value),alert("'"+imeiapp.DOM.IMEI.value+"' has been added to Invoice #"+imeiapp.currentInvoice.invoice),imeiapp.utils.savedIMEIsTally(),imeiapp.DOM.IMEI.value=null,imeiapp.DOM.IMEI.focus(),void 0):(alert("No IMEI Number to Store"),imeiapp.utils.addClass(imeiapp.DOM.IMEI,"attention"),imeiapp.DOM.IMEI.addEventListener("input",function(){imeiapp.utils.removeClass(this,"attention"),this.removeEventListener("input",arguments.callee)}),void 0)},null),imeiapp.pubsub.subscribe("imei-tally","step-2-progress-btn",function(){var a=imeiapp.DOM.reviewInvoice,b=imeiapp.utils.addClass,c=imeiapp.utils.removeClass,d=imeiapp.currentInvoice.imeis.length;d>0?b(a,"active"):c(a,"active")},null),imeiapp.pubsub.subscribe("imei-tally","tally-slots-updater",function(){for(var a=imeiapp.DOM.imeiTallySlots,b=imeiapp.currentInvoice.imeis.length,c=a.length-1;c>=0;c--)a[c].innerHTML=b},null),imeiapp.pubsub.subscribe("reviewInvoice","step-2",function(){imeiapp.utils.gotoScreen(3)},null),imeiapp.pubsub.subscribe("save-registration","final-step",function(){var a=imeiapp.utils.storeRegistration(imeiapp.currentInvoice);0!=a&&imeiapp.pubsub.publish("registration-completed",null,"final-step")},null),imeiapp.pubsub.subscribe("registration-completed","reset-app-on-success",function(){alert("Registration Complete! \n\nApp is Ready to Process a New Registration"),imeiapp.pubsub.publish("cancel-registration",null,"reset-app-on-success")},null),imeiapp.pubsub.subscribe("imei-tally","step-3-imei-list",function(){imeiapp.utils.updateListOfIMEIs()},null),imeiapp.pubsub.subscribe("cancel-registration","restartBtn",function(){imeiapp.DOM.invoice.value=null,imeiapp.DOM.IMEI.value=null,imeiapp.currentInvoice.invoice="",imeiapp.currentInvoice.imeis=[],imeiapp.utils.savedIMEIsTally(),imeiapp.utils.gotoScreen(0)},null),imeiapp.pubsub.subscribe("edit-invoice","editInvoiceBtn",function(){imeiapp.utils.gotoScreen(1),imeiapp.DOM.invoice.select()},null),imeiapp.pubsub.subscribe("edit-invoice-attachments","step-3-back-btn",function(){imeiapp.utils.gotoScreen(2),imeiapp.DOM.IMEI.select()},null),imeiapp.pubsub.subscribe("imei-tally","step-3-bouncer",function(){var a=imeiapp.utils.activeScreenIndex();3==a&&imeiapp.currentInvoice.imeis.length<1&&(alert("No IMEIs are currently attached to Invoice #"+imeiapp.currentInvoice.invoice+". \n\nAdd at least 1 to Proceed"),imeiapp.utils.gotoScreen(2),imeiapp.DOM.IMEI.select())},null),imeiapp.pubsub.subscribe("windowResized","windowSizeWatchdog",function(){imeiapp.DOM.setScreensHeight()},null),imeiapp.pubsub.subscribe("screensResized","autoScroller",function(){imeiapp.animate.scrollTo(imeiapp.DOM.screens[imeiapp.stats.step].offsetTop)},null),imeiapp.pubsub.subscribe("gotToScreen","activeScreenWatchdog",function(){imeiapp.DOM.setScreensHeight()},null),document.addEventListener("touchmove",function(a){a.preventDefault()}),imeiapp.DOM.invoice.addEventListener("keydown",function(a){13==a.keyCode&&imeiapp.DOM.addIMEI.click()}),imeiapp.DOM.IMEI.addEventListener("keydown",function(a){13==a.keyCode&&imeiapp.DOM.saveIMEI.click()}),imeiapp.DOM.setScreensHeight=function(){for(var a=imeiapp.DOM.screens.length-1;a>=0&&!(a<imeiapp.stats.step);a--)imeiapp.DOM.screens[a].style.height=window.innerHeight+"px";imeiapp.pubsub.publish("screensResized",null,"screenResizer")},imeiapp.utils.deactivateActiveScreen=function(){imeiapp.utils.removeClass(imeiapp.DOM.screens[imeiapp.stats.step],"active")},imeiapp.utils.activateScreen=function(a){imeiapp.utils.addClass(a,"active")},imeiapp.utils.gotoScreen=function(a,b){var b=b||400;imeiapp.utils.deactivateActiveScreen(),imeiapp.stats.step=a;var c=imeiapp.DOM.screens[imeiapp.stats.step];imeiapp.utils.activateScreen(c),imeiapp.animate.scrollTo(c.offsetTop,b),setTimeout(function(){imeiapp.pubsub.publish("gotToScreen",null,"gotoScreen")},b+10)},imeiapp.utils.updateListOfIMEIs=function(){var a=imeiapp.DOM.imeiReviewList,b="";a.innerHTML="";for(var c=0;c<imeiapp.currentInvoice.imeis.length;c++)var b=b+"<span class='imeiForReview'>"+imeiapp.currentInvoice.imeis[c]+"</span>"+(c<imeiapp.currentInvoice.imeis.length-1?" | ":"");a.innerHTML=b,imeiapp.DOM.activateIMEIsForReview()},imeiapp.utils.reviewIMEI=function(a){if(0>a)return console.log("no index given to review for reviewIMEI()"),void 0;var b=imeiapp.currentInvoice.imeis[a],c=confirm("Is this IMEI ("+b+") Correct?");if(c!==!0){var d=b,e=prompt("Submit the Correct IMEI to Update or Submit a Blank Field to Delete '"+d+"'",d),f=function(){imeiapp.currentInvoice.imeis[a]=e,alert("'"+d+"' has been replaced with '"+e+"'")},g=function(){alert("'"+d+"' has not been changed or deleted")},h=function(){var b=confirm("Are you sure you want to delete '"+d+"'?");return b!==!0?(alert("'"+d+"' has not been deleted or modified"),void 0):(imeiapp.currentInvoice.imeis.splice(a,1),alert("'"+d+"' has been deleted"),void 0)};e==d||null==e?g():""==e?h():f(),imeiapp.utils.savedIMEIsTally()}},imeiapp.DOM.activateIMEIsForReview=function(){for(var a=imeiapp.DOM.IMEIsForReview,b=a.length-1;b>=0;b--)a[b].addEventListener("click",function(){var a=b;return function(){imeiapp.utils.reviewIMEI(a)}}())},window.applicationCache&&(window.applicationCache.addEventListener("downloading",imeiapp.utils.cacheDownloading),window.applicationCache.addEventListener("updateready",imeiapp.utils.cacheReady)),Offline.options={checkOnLoad:!0,interceptRequests:!1,requests:!1,checks:{active:"xhr",xhr:{url:"server-check.php"}}},imeiapp.network.networkState=function(){return Offline.state},imeiapp.network.checkNetworkState=function(){Offline.check()},imeiapp.network.setOnlineState=function(){var a=imeiapp.utils,b=document.body;a.removeClass(b,"connection-offline"),a.addClass(b,"connection-online")},imeiapp.network.setOfflineState=function(){var a=imeiapp.utils,b=document.body;a.removeClass(b,"connection-online"),a.addClass(b,"connection-offline")},imeiapp.network.pushRegistrations=function(){var a=imeiapp,b=a.utils,c=a.network,d=b.storeTransaction();if(0==d)return setTimeout(function(){imeiapp.storage&&imeiapp.storage.registrations&&JSON.parse(imeiapp.storage.registrations)&&!(JSON.parse(imeiapp.storage.registrations).length<1)&&imeiapp.network.pushRegistrations()},6e4),!1;var e=d;return c.sendTransaction(e),!0},imeiapp.network.sendTransaction=function(a){if(!a)return!1;var b=imeiapp.pubsub.publish,c=imeiapp.utils,d=c.utf8,e=(c.sha1,c.getTransaction(a)),f=JSON.stringify(e),g=d(f),h=new XMLHttpRequest;return h.open("POST",location.href+"process-transaction.php",!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){4==h.readyState&&200==h.status&&b("server-acknowledged-transaction",{server_transaction_id:h.responseText,client_transaction_id:a},"sendTransaction")},h.send("t="+g),!0},imeiapp.network.checkTransactionStatus=function(){var a=imeiapp.pubsub.publish,b=imeiapp.utils,c=(b.utf8,b.sha1,b.getTransactionStorage()),d=new XMLHttpRequest,e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(f);e=JSON.stringify(e),d.open("POST",location.href+"transaction-status-check.php",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var b=JSON.parse(d.responseText);a("transaction-status-received",b,"checkTransactionStatus")}},d.send("t="+e)},imeiapp.network.confirmArchivedTransactions=function(){var a=imeiapp.pubsub.publish,b=imeiapp.utils,c=b.getArchiveStorage(),d=new XMLHttpRequest,e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(f);e=JSON.stringify(e),d.open("POST",location.href+"confirm-transaction.php",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var b=JSON.parse(d.responseText);a("transactions-confirmed",b,"confirmArchivedTransactions")}},d.send("t="+e)},imeiapp.pubsub.subscribe("server-acknowledged-transaction","console.log",function(a){var b=a.notificationParams.server_transaction_id,c=a.notificationParams.client_transaction_id;b==c?console.log("server received transaction "+b):(console.log("something went wrong: client and server id don't match"),console.log(a.notificationParams))},null),imeiapp.pubsub.subscribe("transaction-status-received","process-transaction-status",function(a){var b=a.notificationParams,c=[];for(var d in b)b.hasOwnProperty(d)&&("false"!=b[d]?"processed"!=b[d]||c.push(d):imeiapp.network.sendTransaction(d));c.length>0&&imeiapp.pubsub.publish("transactions-to-archive",c,"process-transaction-status")},null),imeiapp.pubsub.subscribe("transactions-to-archive","archive-keeper",function(a){for(var b=a.notificationParams,c=b.length-1;c>=0;c--){var d=imeiapp.utils.archiveTransaction(b[c]);console.log("archive transaction #"+b[c]+": "+d)}imeiapp.pubsub.publish("transactions-archived",null,"archive-keeper")},null),imeiapp.pubsub.subscribe("transactions-archived","confirm-transactions",function(){var a=imeiapp.utils.getArchiveStorage();for(var b in a)if(a.hasOwnProperty(b)){console.log("now confirming transactions on server"),imeiapp.network.confirmArchivedTransactions();break}},null),imeiapp.pubsub.subscribe("transactions-confirmed","archive-keeper",function(a){{var b=a.notificationParams;imeiapp.utils.getArchiveStorage()}console.log("collection of confirmed transactions"),console.log(b);for(var c in b)b.hasOwnProperty(c)&&imeiapp.utils.deleteArchiveEntry(c)},null),Offline.on("up",function(){imeiapp.pubsub.publish("network-up",null,"connection-watchdog")}),Offline.on("down",function(){imeiapp.pubsub.publish("network-down",null,"connection-watchdog")}),Offline.on("reconnect:started",function(){imeiapp.pubsub.publish("network-reconnecting",null,"connection-watchdog")}),Offline.on("reconnect:stopped",function(){imeiapp.pubsub.publish("network-reconnecting-exit",null,"connection-watchdog")}),imeiapp.pubsub.subscribe("network-reconnecting","light-flicker",function(){var a=imeiapp.utils,b=imeiapp.DOM.connectionIndicator;imeiapp.network.checkingLightFlickerInterval=setInterval(function(){for(var c=b.length-1;c>=0;c--)a.addClass(b[c],"connection-checking"),setTimeout(function(){var d=c;return function(){a.removeClass(b[d],"connection-checking")}}(),350)},2e3),imeiapp.pubsub.subscribe("network-reconnecting-exit","light-flicker",function(){clearInterval(imeiapp.network.checkingLightFlickerInterval),imeiapp.pubsub.unsubscribe("network-reconnecting-exit","light-flicker")},null)},null),imeiapp.pubsub.subscribe("network-up","online-indicator",function(){imeiapp.network.setOnlineState()},null),imeiapp.pubsub.subscribe("network-down","online-indicator",function(){imeiapp.network.setOfflineState()},null),imeiapp.pubsub.subscribe("network-up","heartbeat",function(){var a=imeiapp.network,b=imeiapp.pubsub,c=a.intervals,d=b.subscribe,e=b.unsubscribe,f=function(){a.checkNetworkState()},g=function(){clearInterval(c.heartbeat),delete c.heartbeat};c.heartbeat=setInterval(f,7500),d("network-down","heartbeat",function(){g(),e("network-down","heartbeat")},null)},null),imeiapp.pubsub.subscribe("network-up","confirm-transactions",function(){var a=imeiapp,b=a.network,c=a.storage,d=a.pubsub,e=b.intervals,f=d.subscribe,g=d.unsubscribe,h=function(){if(c&&c.archives&&JSON.parse(c.archives)){var a=imeiapp.utils.getArchiveStorage();for(var d in a)if(a.hasOwnProperty(d)){b.confirmArchivedTransactions();break}}},i=function(){clearInterval(e.confirmArchivedTransactions),delete e.confirmArchivedTransactions};h(),e.confirmArchivedTransactions=setInterval(h,54e4),f("network-down","confirm-transactions",function(){i(),g("network-down","confirm-transactions")},null)},null),imeiapp.pubsub.subscribe("network-up","check-transaction-status",function(){var a=imeiapp,b=a.pubsub,c=a.network,d=a.storage,e=c.intervals,f=b.subscribe,g=b.unsubscribe,h=function(){if(d&&d.transactions&&JSON.parse(d.transactions)){var a=imeiapp.utils.getTransactionStorage();for(var b in a)if(a.hasOwnProperty(b)){c.checkTransactionStatus();break}}},i=function(){clearInterval(e.transactionStatusCheck),delete e.transactionStatusCheck};h(),e.transactionStatusCheck=setInterval(h,6e5),f("network-down","check-transaction-status",function(){i(),g("network-down","check-transaction-status")},null)},null),imeiapp.pubsub.subscribe("network-up","push-registrations-to-server",function(){var a=imeiapp,b=a.pubsub,c=a.network,d=a.storage,e=c.intervals,f=b.subscribe,g=b.unsubscribe,h=function(){d&&d.registrations&&JSON.parse(d.registrations)&&!(JSON.parse(d.registrations).length<1)&&c.pushRegistrations()},i=function(){clearInterval(e.pushRegistrations),delete e.pushRegistrations};h(),e.pushRegistrations=setInterval(h,66e4),f("network-down","push-registrations-to-server",function(){i(),g("network-down","push-registrations-to-server")},null)},null),document.addEventListener("DOMContentLoaded",function(){imeiapp.utils.launchApp()});</script>
	</body>
</html>